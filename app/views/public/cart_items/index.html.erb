<%= render 'layouts/customer_header' %>
<h1>ショッピングカート</h1>
<table>
	<tr>
		<th>商品名</th>
		<th>単価</th>
		<th>数量</th>
		<th>小計</th>
		<th></th>
	</tr>
	<tr>
		<!-- @sumに０を代入 -->
		<% @sum = 0%>
		<!-- @cartsにはCurtItemモデルの全てを代入してある -->
		<% current_customer.cart_items.each do |c|%>
		<!-- カート内の商品名を表示 -->
		<td><%= c.item.name%></td>
		<!-- カート内の商品の値段を表示 -->
		<td><%= c.item.price%></td>
		<td><%= c.amount%></td>
		<!-- @totalにpriceをamountの乗算を代入 -->
		<% @total = c.item.price * c.amount%>
		<!-- @totalを表示 -->
		<!-- カート内の商品の値段と個数を乗算した小計を表示 -->
		<td><%= @total %></td>
		<!-- @sumに@totalの値を加算 -->
		<!-- @sumにtotalpeiceが繰り返し処理される -->
		<% @sum += @total %>
	</tr>
		<% end %>
</table>
		<!-- @sumを表示 -->
		<p>合計金額 <%= @sum %> 円</p>

		<%= link_to '買い物を続ける', public_items_path %>
		<%= link_to '情報入力に進む', new_public_order_url(@carts) %>